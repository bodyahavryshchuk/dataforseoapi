
<h2>Create a Task</h2>
<form [formGroup]="task_form" (ngSubmit)="onSubmit()">

    <label for="engine">engine</label>
    <select formControlName="engine" matNativeControl required>
        <option value="google">google</option>
        <option value="yandex">yandex</option>
        <option value="bing">bing</option>
        <option value="baidu">baidu</option>
        <option value="yahoo">yahoo</option>
    </select>
    <br>
    <label for="location">location</label>
    <select formControlName="location" matNativeControl required>
        <option value="21176">Texas</option>
        <option value="21133">Arkansas</option>
        <option value="21135">Alabama</option>
    </select>
  <br>
  <label for="keyword">keyword</label>
    <input type="text" formControlName="keyword" required>
    <br>
    <button type="submit">Create Task</button>
</form>


<h2>My Tasks</h2>
<ul>
  <li *ngFor="let task of tasks$ | async">

   <p>
        <span class="text-muted">Task:</span> {{ task.id }}<br>
        <span class="text-muted">Status code:</span> {{ task.status_code }}<br>
        <span class="text-muted">Status message:</span> {{ task.status_message }}<br>
        <span class="text-muted">Time:</span> {{ task.time }}<br>
        <span class="text-muted">Cost:</span> {{ task.cost }}<br>
   </p>

  </li>

<h2>Task data</h2>
  <li *ngFor="let taskdata of taskdata$ | async">

   <p>
        <span class="text-muted">api:</span> {{ taskdata.api }}<br>
        <span class="text-muted">function:</span> {{ taskdata.function }}<br>
        <span class="text-muted">se:</span> {{ taskdata.se }}<br>
        <span class="text-muted">location_code:</span> {{ taskdata.location_code }}<br>
        <span class="text-muted">keyword:</span> {{ taskdata.keyword }}<br>
        <span class="text-muted">task:</span> {{ taskdata.task }}<br>
        <button type="button" (click)=getResult(taskdata.se,taskdata.task)>Get result</button>

   </p>


  </li>
</ul>
<h2>Task result</h2>
    <ul>
      <li *ngFor="let taskresult of taskresult$ | async">
         <p>
              <span class="text-muted">task:</span> {{ taskresult.task }}<br>
              <span class="text-muted">type:</span> {{ taskresult.type }}<br>
              <span class="text-muted">rank_group:</span> {{ taskresult.rank_group }}<br>
              <span class="text-muted">rank_absolute:</span> {{ taskresult.rank_absolute }}<br>
              <span class="text-muted">title:</span> {{ taskresult.title }}<br>
              <span class="text-muted">description:</span> {{ taskresult.description }}<br>
              <span class="text-muted">url:</span> {{ taskresult.url }}<br>
         </p>
      </li>
    </ul>
